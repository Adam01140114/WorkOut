<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Food Icon Finder</title>
  <style>
    :root {
      --bg: #0b0f14;
      --card: #121821;
      --muted: #90a4b4;
      --text: #e9f0f6;
      --accent: #6ee7b7;
      --ring: rgba(110,231,183,.35);
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% 0%, #0f1720 0%, var(--bg) 60%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(900px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent 120px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      padding: 22px;
    }
    h1 { margin: 0 0 6px; font-size: 28px; letter-spacing: .2px; }
    p.sub { margin: 0 0 18px; color: var(--muted); font-size: 14px; }
    .row { display: grid; grid-template-columns: 1fr auto; gap: 10px; }
    .input {
      display: flex; align-items: center; gap: 10px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 12px;
      padding: 10px 12px;
      box-shadow: inset 0 0 0 1px transparent;
    }
    .input:focus-within { box-shadow: inset 0 0 0 1px var(--ring); border-color: transparent; }
    .input input {
      background: transparent; border: 0; outline: 0; color: var(--text);
      font-size: 16px; width: 100%;
    }
    .btn {
      background: linear-gradient(180deg, #7ef3c5, #50d0a7);
      color: #06261b; border: 0; padding: 10px 14px; font-weight: 600; border-radius: 12px;
      cursor: pointer;
    }
    .btn:active { transform: translateY(1px); }
    .canvas {
      margin-top: 18px;
      display: grid; grid-template-columns: 1fr; gap: 12px;
    }
    .stage {
      background: repeating-conic-gradient(#1b2430 0% 25%, #1c2834 0% 50%) 50% / 24px 24px;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px; padding: 20px; display: grid; place-items: center; min-height: 260px;
    }
    .stage img, .stage svg { width: var(--size, 192px); height: var(--size, 192px); object-fit: contain; }
    .controls {
      display: flex; flex-wrap: wrap; align-items: center; gap: 12px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px; padding: 12px;
    }
    .control { display: grid; gap: 6px; font-size: 13px; color: var(--muted); }
    input[type="range"] { width: 240px; }
    .chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .chip { cursor: pointer; user-select: none; border-radius: 999px; padding: 6px 10px; font-size: 13px;
            background: #1a222e; border: 1px solid rgba(255,255,255,.08); color: #cfe5f3; }
    .meta { color: var(--muted); font-size: 12px; }
    .error { color: #ff8b8b; }
    .row2 { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
  </style>
</head>
<body>
  <div class="app">
    <h1>Food Icon Finder</h1>
    <p class="sub">Type a food name or paste an emoji. You will get a crisp SVG icon on a transparent background.</p>

    <form id="search" class="row" autocomplete="off">
      <div class="input">
        <label for="term" class="sr-only">Food name</label>
        <input id="term" name="term" placeholder="Try burger, pizza, ramen, taco, sushi..." required />
      </div>
      <button class="btn" type="submit">Show icon</button>
    </form>

    <div class="chips" id="chips"></div>

    <div class="canvas">
      <div class="stage" id="stage" aria-live="polite">
        <div class="meta">No icon yet. Try a word above or click a chip.</div>
      </div>
      <div class="controls row2">
        <div class="control">
          <label for="size">Icon size</label>
          <input id="size" type="range" min="64" max="512" step="8" value="192" />
        </div>
        <div class="meta" id="sourceMeta"></div>
      </div>
    </div>
  </div>

  <script>
    // Basic food term to emoji map
    const FOOD_MAP = new Map([
  // drinks
  ["milk","🥛"], ["glass of milk","🥛"], ["oat milk","🥛"], ["soy milk","🥛"], ["milk tea","🧋"],
  ["water","💧"], ["juice","🧃"], ["apple juice","🧃"], ["orange juice","🧃"],
  ["soda","🥤"], ["cola","🥤"], ["soft drink","🥤"], ["milkshake","🥤"],
  ["coffee","☕"], ["latte","☕"], ["espresso","☕"], ["tea","🍵"], ["green tea","🍵"], ["teapot","🫖"],
  ["boba","🧋"], ["bubble tea","🧋"], ["smoothie","🥤"],
  ["beer","🍺"], ["beers","🍻"], ["wine","🍷"], ["champagne","🍾"], ["sake","🍶"], ["cocktail","🍸"], ["tropical drink","🍹"], ["mate","🧉"],

  // mains and fast food
  ["burger","🍔"], ["hamburger","🍔"], ["cheeseburger","🍔"],
  ["pizza","🍕"], ["slice","🍕"],
  ["hot dog","🌭"], ["hotdog","🌭"],
  ["taco","🌮"], ["burrito","🌯"], ["tamale","🫔"],
  ["sandwich","🥪"], ["wrap","🌯"], ["flatbread","🫓"],
  ["fries","🍟"], ["french fries","🍟"], ["pizza fries","🍟"],
  ["dumpling","🥟"], ["gyoza","🥟"], ["bao","🥟"], ["bento","🍱"], ["takeout","🥡"],
  ["sushi","🍣"], ["ramen","🍜"], ["noodles","🍜"], ["pho","🍜"], ["spaghetti","🍝"], ["pasta","🍝"],
  ["curry","🍛"], ["curry rice","🍛"], ["rice","🍚"], ["rice ball","🍙"], ["rice cracker","🍘"],
  ["soup","🍲"], ["stew","🍲"], ["bowl","🥣"], ["fondue","🫕"],
  ["bbq","🍖"], ["steak","🥩"], ["meat","🥩"], ["bacon","🥓"], ["chicken","🍗"], ["drumstick","🍗"], ["wings","🍗"],
  ["fried shrimp","🍤"], ["shrimp","🍤"], ["lobster","🦞"], ["crab","🦀"], ["oyster","🦪"], ["canned food","🥫"],
  ["egg","🥚"], ["omelet","🍳"], ["omelette","🍳"],
  ["salad","🥗"], ["taco salad","🥗"],

  // breads and breakfast
  ["bread","🍞"], ["baguette","🥖"], ["croissant","🥐"], ["bagel","🥯"], ["pancakes","🥞"], ["waffle","🧇"],

  // sweets
  ["donut","🍩"], ["doughnut","🍩"], ["ice cream","🍨"], ["soft serve","🍦"], ["shaved ice","🍧"],
  ["cake","🍰"], ["birthday cake","🎂"], ["cupcake","🧁"], ["pie","🥧"],
  ["cookie","🍪"], ["candy","🍬"], ["lollipop","🍭"], ["chocolate","🍫"], ["honey","🍯"],

  // cheese and pantry
  ["cheese","🧀"], ["butter","🧈"], ["salt","🧂"], ["jar","🫙"],

  // produce
  ["apple","🍎"], ["green apple","🍏"], ["banana","🍌"], ["strawberry","🍓"], ["blueberries","🫐"],
  ["grapes","🍇"], ["orange","🍊"], ["lemon","🍋"], ["pear","🍐"], ["peach","🍑"], ["mango","🥭"],
  ["pineapple","🍍"], ["melon","🍈"], ["watermelon","🍉"], ["kiwi","🥝"], ["coconut","🥥"],
  ["avocado","🥑"], ["tomato","🍅"], ["corn","🌽"], ["carrot","🥕"], ["potato","🥔"], ["sweet potato","🍠"],
  ["mushroom","🍄"], ["eggplant","🍆"], ["cucumber","🥒"], ["pickle","🥒"], ["broccoli","🥦"], ["leafy greens","🥬"], ["lettuce","🥬"],
  ["bell pepper","🫑"], ["pepper","🌶️"], ["garlic","🧄"], ["onion","🧅"], ["beans","🫘"], ["peanuts","🥜"], ["chestnut","🌰"], ["olive","🫒"],

  // misc
  ["popcorn","🍿"], ["coffee beans","☕"], ["bento box","🍱"], ["takeout box","🥡"]
]);

    const SAMPLE_CHIPS = ["milk","burger","pizza","ramen","taco","sushi","fries","burrito","salad","donut","coffee","boba","pie","broccoli"];

    const form = document.getElementById('search');
    const termEl = document.getElementById('term');
    const stage = document.getElementById('stage');
    const chips = document.getElementById('chips');
    const size = document.getElementById('size');
    const sourceMeta = document.getElementById('sourceMeta');

    // Build chips
    chips.innerHTML = SAMPLE_CHIPS.map(t => `<span class="chip" data-term="${t}">${t}</span>`).join('');
    chips.addEventListener('click', (e) => {
      const target = e.target.closest('.chip');
      if (!target) return;
      termEl.value = target.dataset.term;
      form.dispatchEvent(new Event('submit', { cancelable: true }));
    });

    // Handle size slider
    size.addEventListener('input', () => {
      stage.style.setProperty('--size', size.value + 'px');
    });

    // Main search
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const raw = termEl.value.trim();
      if (!raw) return;
      const emoji = pickEmoji(raw);
      if (!emoji) {
        renderError(`Could not find an icon for “${escapeHtml(raw)}”. Try another word or paste an emoji.`);
        return;
      }
      await renderEmojiIcon(emoji);
    });

    function normalizeTerm(s) {
      return s.toLowerCase().replace(/[-_]+/g, ' ').replace(/\s+/g, ' ').trim();
    }

    function pickEmoji(input) {
      const hasEmoji = /\p{Extended_Pictographic}/u.test(input);
      if (hasEmoji) {
        // Return the first emoji char
        const match = input.match(/\p{Extended_Pictographic}(\uFE0F\u20E3|\uFE0F|\u200D\p{Extended_Pictographic})*/u);
        if (match) return match[0];
      }
      const t = normalizeTerm(input);
      if (FOOD_MAP.has(t)) return FOOD_MAP.get(t);
      // Try simple plural trim
      if (t.endsWith('es') && FOOD_MAP.has(t.slice(0, -2))) return FOOD_MAP.get(t.slice(0, -2));
      if (t.endsWith('s') && FOOD_MAP.has(t.slice(0, -1))) return FOOD_MAP.get(t.slice(0, -1));
      // Try removing common words
      const simplified = t.replace(/^(a|an|the)\s+/g, '').replace(/\s+emoji$/g, '');
      if (FOOD_MAP.has(simplified)) return FOOD_MAP.get(simplified);
  // Light fuzzy fallback
  const keys = Array.from(FOOD_MAP.keys()).sort((a,b)=>b.length - a.length);
  for (const k of keys) {
    if (simplified.includes(k) || k.includes(simplified)) return FOOD_MAP.get(k);
  }
  return null;
    }

    function toCodepoints(emoji, upper = true) {
      const codes = [];
      for (const ch of [...emoji]) {
        const code = ch.codePointAt(0).toString(16);
        codes.push(upper ? code.toUpperCase() : code);
      }
      return codes.join('-');
    }

    async function renderEmojiIcon(emoji) {
      const openMojiBase = 'https://cdn.jsdelivr.net/npm/openmoji/color/svg/';
      const twemojiBase = 'https://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/';
      const codeU = toCodepoints(emoji, true);    // for OpenMoji
      const codeL = toCodepoints(emoji, false);   // for Twemoji

      // helper that returns a promise that resolves if the image loads, rejects if it errors
      function trySrc(url, label) {
        return new Promise((resolve, reject) => {
          const img = new Image();
          img.onload = () => resolve({ img, label, url });
          img.onerror = () => reject(new Error('not found'));
          img.decoding = 'async';
          img.alt = `Icon for ${emoji}`;
          img.src = url;
        });
      }

      // Try OpenMoji with and without FE0F, then Twemoji with and without FE0F
      const noFE0F_U = codeU.replace(/-FE0F/gi, '');
      const noFE0F_L = codeL.replace(/-fe0f/gi, '');
      const candidates = [
        { url: openMojiBase + codeU + '.svg', label: 'OpenMoji' },
        { url: openMojiBase + noFE0F_U + '.svg', label: 'OpenMoji' },
        { url: twemojiBase + codeL + '.svg', label: 'Twemoji' },
        { url: twemojiBase + noFE0F_L + '.svg', label: 'Twemoji' },
      ];

      let loaded = null;
      for (const c of candidates) {
        try { loaded = await trySrc(c.url, c.label); break; } catch {}
      }

      if (!loaded) {
        renderError('Icon image not available from free CDNs. Try another food.');
        return;
      }

      stage.innerHTML = '';
      stage.appendChild(loaded.img);
      sourceMeta.textContent = `Source: ${loaded.label} • ${emojiToName(emoji)} (${toCodepoints(emoji, true)})`;
    }

    function renderError(message) {
      stage.innerHTML = `<div class="error">${message}</div>`;
      sourceMeta.textContent = '';
    }

    function emojiToName(emoji) {
      // Very simple name hint for a few common emoji
      const reverse = new Map(Array.from(FOOD_MAP.entries()).map(([k, v]) => [v, k]));
      return reverse.get(emoji) || 'emoji';
    }

    function escapeHtml(s) {
      return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    // Submit on load with a default example
    window.addEventListener('DOMContentLoaded', () => {
      stage.style.setProperty('--size', size.value + 'px');
      termEl.value = 'milk';
      form.dispatchEvent(new Event('submit', { cancelable: true }));
    });
  </script>
</body>
</html>
