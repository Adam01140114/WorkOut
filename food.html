<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Food Icon Finder — Flaticon Uicons</title>

  <!-- Flaticon Uicons: all families and weights via jsDelivr -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@flaticon/flaticon-uicons@3.3.1/css/all/all.css">

  <style>
    :root {
      --bg: #0b0f14;
      --card: #121821;
      --muted: #90a4b4;
      --text: #e9f0f6;
      --accent: #6ee7b7;
      --ring: rgba(110,231,183,.35);
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% 0%, #0f1720 0%, var(--bg) 60%);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: min(900px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent 120px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      padding: 22px;
    }
    h1 { margin: 0 0 6px; font-size: 28px; letter-spacing: .2px; }
    p.sub { margin: 0 0 18px; color: var(--muted); font-size: 14px; }
    .row { display: grid; grid-template-columns: 1fr auto; gap: 10px; }
    .input {
      display: flex; align-items: center; gap: 10px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.09);
      border-radius: 12px;
      padding: 10px 12px;
      box-shadow: inset 0 0 0 1px transparent;
    }
    .input:focus-within { box-shadow: inset 0 0 0 1px var(--ring); border-color: transparent; }
    .input input {
      background: transparent; border: 0; outline: 0; color: var(--text);
      font-size: 16px; width: 100%;
    }
    .btn {
      background: linear-gradient(180deg, #7ef3c5, #50d0a7);
      color: #06261b; border: 0; padding: 10px 14px; font-weight: 600; border-radius: 12px;
      cursor: pointer;
    }
    .btn:active { transform: translateY(1px); }
    .canvas { margin-top: 18px; display: grid; grid-template-columns: 1fr; gap: 12px; }
    .stage {
      background: repeating-conic-gradient(#1b2430 0% 25%, #1c2834 0% 50%) 50% / 24px 24px;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 14px; padding: 20px; display: grid; place-items: center; min-height: 260px;
    }
    /* Uicons render via ::before. Size by font-size. */
    .stage .uicon {
      font-size: var(--size, 192px);
      line-height: 1;
      display: inline-block;
      width: 1em; height: 1em;
    }
    .controls {
      display: flex; flex-wrap: wrap; align-items: center; gap: 12px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 12px; padding: 12px;
    }
    .control { display: grid; gap: 6px; font-size: 13px; color: var(--muted); }
    input[type="range"] { width: 240px; }
    .chips { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
    .chip { cursor: pointer; user-select: none; border-radius: 999px; padding: 6px 10px; font-size: 13px;
            background: #1a222e; border: 1px solid rgba(255,255,255,.08); color: #cfe5f3; }
    .meta { color: var(--muted); font-size: 12px; }
    .error { color: #ff8b8b; }
    .row2 { display: grid; grid-template-columns: 1fr auto; gap: 10px; align-items: center; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
    footer { margin-top: 8px; color: var(--muted); font-size: 12px; }
  </style>
</head>
<body>
  <div class="app">
    <h1>Food Icon Finder</h1>
    <p class="sub">Type a food name. This version uses <strong>Flaticon Uicons</strong> and renders a crisp vector with a transparent background.</p>

    <form id="search" class="row" autocomplete="off">
      <div class="input">
        <label for="term" class="sr-only">Food name</label>
        <input id="term" name="term" placeholder="Try milk, burger, pizza, ramen, taco, sushi..." required />
      </div>
      <button class="btn" type="submit">Show icon</button>
    </form>

    <div class="chips" id="chips"></div>

    <div class="canvas">
      <div class="stage" id="stage" aria-live="polite">
        <div class="meta">No icon yet. Try a word above or click a chip.</div>
      </div>
      <div class="controls row2">
        <div class="control">
          <label for="size">Icon size</label>
          <input id="size" type="range" min="64" max="512" step="8" value="192" />
        </div>
        <div class="meta" id="sourceMeta"></div>
      </div>
      <footer>
        Uicons by <a href="https://www.flaticon.com/uicons" target="_blank" rel="noopener">Flaticon</a>.
      </footer>
    </div>
  </div>

  <script>
    const SAMPLE_CHIPS = ["milk","burger","pizza","ramen","taco","sushi","fries","burrito","salad","donut","coffee","boba","pie","broccoli"];

    const form = document.getElementById('search');
    const termEl = document.getElementById('term');
    const stage = document.getElementById('stage');
    const chips = document.getElementById('chips');
    const size = document.getElementById('size');
    const sourceMeta = document.getElementById('sourceMeta');

    // chips
    chips.innerHTML = SAMPLE_CHIPS.map(t => `<span class="chip" data-term="${t}">${t}</span>`).join('');
    chips.addEventListener('click', (e) => {
      const target = e.target.closest('.chip');
      if (!target) return;
      termEl.value = target.dataset.term;
      form.dispatchEvent(new Event('submit', { cancelable: true }));
    });

    // size
    size.addEventListener('input', () => {
      stage.style.setProperty('--size', size.value + 'px');
    });

    // synonyms to improve hits
    const SYNONYMS = new Map([
      ["boba", ["bubble-tea"]],
      ["bubble tea", ["bubble-tea"]],
      ["ramen", ["noodles"]],
      ["fries", ["french-fries","fries"]],
      ["hot dog", ["hot-dog","hotdog"]],
      ["hamburger", ["hamburger","burger","burger-fries"]],
      ["burger", ["hamburger","burger","burger-fries"]],
      ["pizza", ["pizza-slice","holding-hand-pizza-box"]],
      ["sushi", ["sushi"]],
      ["milk", ["milk","milk-alt","bottle-baby"]],
      ["tea", ["bubble-tea","tea","teapot"]],
      ["coffee", ["coffee","coffee-cup"]],
      ["donut", ["donut","doughnut"]],
      ["noodles", ["noodles"]],
      ["sandwich", ["sandwich"]],
      ["ice cream", ["ice-cream"]],
      ["soft serve", ["ice-cream"]],
      ["cake", ["cake"]],
      ["cookie", ["cookie"]],
      ["bread", ["bread"]],
      ["cheese", ["cheese","cheese-alt"]],
      ["salad", ["salad"]],
      ["taco", ["taco"]],
      ["burrito", ["burrito"]],
    ]);

    // known-good classes for speed
    const DIRECT_CLASS = new Map([
      ["pizza-slice", "fi fi-rr-pizza-slice"],
      ["noodles", "fi fi-tr-noodles"],
      ["bubble-tea", "fi fi-rr-bubble-tea"],
      ["hamburger", "fi fi-rc-hamburger"],
      ["burger-fries", "fi fi-rr-burger-fries"],
      ["sandwich", "fi fi-rr-sandwich"],
      ["milk", "fi fi-bs-milk"],
      ["milk-alt", "fi fi-rr-milk-alt"],
      ["bottle-baby", "fi fi-tr-bottle-baby"],
      ["sushi", "fi fi-tr-sushi"],
    ]);

    // prefixes to probe
    const PREFIXES = [
      'fi fi-rr', // rounded regular
      'fi fi-sr', // rounded solid
      'fi fi-br', // rounded bold
      'fi fi-tr', // rounded thin
      'fi fi-rs', // straight regular
      'fi fi-ss', // straight solid
      'fi fi-bs', // straight bold
      'fi fi-ts', // straight thin
      'fi fi-rc', // rounded colored
    ];

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const raw = termEl.value.trim();
      if (!raw) return;
      const cls = await pickUiconClass(raw);
      if (!cls) {
        renderError(`No Flaticon Uicon found for “${escapeHtml(raw)}”. Try pizza, burger, milk, ramen, taco or paste a Uicons class like <code>fi fi-rr-pizza-slice</code>.`);
        return;
      }
      renderUicon(cls, raw);
    });

    function normalizeTerm(s) {
      return s.toLowerCase().replace(/[-_]+/g, ' ').replace(/\s+/g, ' ').trim();
    }
    function toSlug(s) {
      return normalizeTerm(s).replace(/[^a-z0-9 ]/g, '').replace(/\s+/g, '-');
    }

    async function pickUiconClass(input) {
      // user pasted a class already
      if (/^fi\s+fi-[a-z]{2}-[a-z0-9-]+$/.test(input.trim())) return input.trim();

      const t = normalizeTerm(input);
      const candidates = new Set();

      if (SYNONYMS.has(t)) {
        for (const slug of SYNONYMS.get(t)) candidates.add(slug);
      }

      const slug = toSlug(t);
      candidates.add(slug);
      if (!slug.endsWith('-alt')) candidates.add(slug + '-alt');

      // fast path for known classes
      for (const c of candidates) {
        const direct = DIRECT_CLASS.get(c);
        if (direct) return direct;
      }

      // probe prefixes for a valid glyph
      for (const c of candidates) {
        const cls = await probePrefixes(c);
        if (cls) return cls;
      }

      // last resort: try each word
      for (const part of t.split(' ')) {
        const s = toSlug(part);
        const cls = await probePrefixes(s);
        if (cls) return cls;
      }
      return null;
    }

    async function probePrefixes(slug) {
      for (const pre of PREFIXES) {
        const cls = `${pre}-${slug}`;
        if (await hasGlyph(cls)) return cls;
      }
      return null;
    }

    function hasGlyph(className) {
      return new Promise((resolve) => {
        const el = document.createElement('i');
        el.className = `uicon ${className}`;
        el.style.position = 'absolute';
        el.style.left = '-9999px';
        el.style.top = '-9999px';
        document.body.appendChild(el);
        requestAnimationFrame(() => {
          const content = getComputedStyle(el, '::before').getPropertyValue('content');
          document.body.removeChild(el);
          resolve(content && content !== 'none' && content !== 'normal' && content !== '""');
        });
      });
    }

    function renderUicon(className, rawTerm) {
      stage.innerHTML = '';
      const i = document.createElement('i');
      i.className = `uicon ${className}`;
      i.setAttribute('role', 'img');
      i.setAttribute('aria-label', rawTerm);
      stage.appendChild(i);
      sourceMeta.textContent = `Source: Flaticon Uicons • ${className}`;
    }

    function renderError(message) {
      stage.innerHTML = `<div class="error">${message}</div>`;
      sourceMeta.textContent = '';
    }

    function escapeHtml(s) {
      return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
    }

    // demo
    window.addEventListener('DOMContentLoaded', () => {
      stage.style.setProperty('--size', size.value + 'px');
      termEl.value = 'milk';
      form.dispatchEvent(new Event('submit', { cancelable: true }));
    });
  </script>
</body>
</html>
